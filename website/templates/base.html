<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script>
      $(document).ready(function() {
        $(".jsTableRow").dblclick(function(){
          var str = $(this).text().trim().replace(/\s\s+/g, ' ').split(" ")
          var table = $("h1").text().split(" ")[0]
          console.log("dblclick:"+str+" -- "+table)
          if (table == "Matches"){
            window.location.href = '/table/games/'+str[0]+'/0'
          } else if (table == "Games"){
            window.location.href = '/table/plays/'+str[0]+'/'+str[3]
          } else if (table == "Drafts"){
            window.location.href = '/table/picks/'+str[0]
          }
        });
      });
    </script>
    <script>
      $(document).ready(function(){
          $("tr").click(function(){
              $(this).toggleClass("active");
          });
      });
    </script>
    <script>
      $(document).ready(function(){
        $("tr").click(function(){
          var myarray = [];
          $(".active").each(function() {
              //console.log($(this).html());
              myarray.push($(this).text().trim().replace(/\s\s+/g, ' ').split(" "));
          });
          //console.log(myarray);
        });
      });
    </script>
    <script>
      $(document).ready(function(){
        $("tr").click(function(){
          var toRevise = [];
          $(".active").each(function() {
              //console.log($(this).html());
              toRevise = $(this).text().trim().replace(/\s\s+/g, ' ').split(" ");
          });
          if (toRevise.length > 0){
            fetch('/values/'+toRevise[0]).then(function(response){
              response.json().then(function(data){
                document.getElementById("exampleModalLabel").innerHTML = 'Revise Record - ' + data.match_id;
                document.getElementById("ModalDate").innerHTML = '<center><b>Date Played:</b> ' + data.date + '</center>';
                document.getElementById("ModalP1").innerHTML = '<b>P1:</b> ' + data.p1;
                document.getElementById("ModalP2").innerHTML = '<b>P2:</b> ' + data.p2;
                document.getElementById('P1_Subarch').value = data.p1_subarch;
                document.getElementById('P2_Subarch').value = data.p2_subarch;
                console.log(data)
              });
            });
          };
          //console.log(toRevise);
        });
      });
    </script>
    <script>
      function showP1Arch(item) {document.getElementById("P1ArchButton").innerHTML = item.innerHTML;}
      function showP2Arch(item) {document.getElementById("P2ArchButton").innerHTML = item.innerHTML;}
      function showFormat(item) {
        document.getElementById("FormatButton").innerHTML = item.innerHTML;
        if (item.innerHTML == "Limited"){
          document.getElementById("MatchTypeMenu").innerHTML = '<li><a class="dropdown-item" href="#" onclick="showMatchType(this)">Limited Match Types</a></li>';
          if (document.getElementById("MatchTypeButton").innerHTML == "Constructed Match Types"){
            document.getElementById("MatchTypeButton").innerHTML = "Match_Type";
          }
          document.getElementById("P1ArchButton").disabled = true;
          document.getElementById("P2ArchButton").disabled = true;
          document.getElementById("P1ArchButton").innerHTML = "Limited";
          document.getElementById("P2ArchButton").innerHTML = "Limited";
          document.getElementById("LimitedFormatButton").disabled = false;
        } else if (item.innerHTML == "Constructed"){
          document.getElementById("MatchTypeMenu").innerHTML = '<li><a class="dropdown-item" href="#" onclick="showMatchType(this)">Constructed Match Types</a></li>';
          if (document.getElementById("MatchTypeButton").innerHTML == "Limited Match Types"){
            document.getElementById("MatchTypeButton").innerHTML = "Match_Type";
          }
          document.getElementById("P1ArchButton").disabled = false;
          document.getElementById("P2ArchButton").disabled = false;
          document.getElementById("LimitedFormatButton").disabled = true;
          document.getElementById("LimitedFormatButton").innerHTML = "Limited_Format";
          if (document.getElementById("P1ArchButton").innerHTML == "Limited"){
            document.getElementById("P1ArchButton").innerHTML = "P1_Arch";
          }
          if (document.getElementById("P2ArchButton").innerHTML == "Limited"){
            document.getElementById("P2ArchButton").innerHTML = "P2_Arch";
          }
        }
        console.log(item.innerHTML)}
      function showLimitedFormat(item) {document.getElementById("LimitedFormatButton").innerHTML = item.innerHTML;}
      function showMatchType(item) {document.getElementById("MatchTypeButton").innerHTML = item.innerHTML;}
      function changeHiddenInputs() {
        document.getElementById("Match_ID").value = document.getElementById("exampleModalLabel").innerHTML.trim().split(" - ")[1]
        document.getElementById("P1Arch").value = document.getElementById("P1ArchButton").innerHTML.trim()
        document.getElementById("P2Arch").value = document.getElementById("P2ArchButton").innerHTML.trim()
        document.getElementById("Format").value = document.getElementById("FormatButton").innerHTML.trim()
        document.getElementById("Limited_Format").value = document.getElementById("LimitedFormatButton").innerHTML.trim()
        document.getElementById("Match_Type").value = document.getElementById("MatchTypeButton").innerHTML.trim()
        console.log(document.getElementById("P1Arch").value)
        console.log(document.getElementById("P2Arch").value)
        console.log(document.getElementById("Format").value)
        console.log(document.getElementById("Limited_Format").value)
        console.log(document.getElementById("Match_Type").value)
      }
    </script>

  </head>

  <body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <a class="navbar-brand" href="{{ url_for('views.index') }}">Navbar</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="{{ url_for('views.index') }}">Home</a>
            </li>
            {% if user.is_authenticated %}
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('views.logout') }}">Logout</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Tables
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="{{ url_for('views.table', table_name='Matches') }}">Matches</a></li>
                <li><a class="dropdown-item" href="{{ url_for('views.table', table_name='Games') }}">Games</a></li>
                <li><a class="dropdown-item" href="{{ url_for('views.table', table_name='Plays') }}">Plays</a></li>
                <li><a class="dropdown-item" href="{{ url_for('views.table', table_name='Drafts') }}">Drafts</a></li>
                <li><a class="dropdown-item" href="{{ url_for('views.table', table_name='Picks') }}">Draft Picks</a></li>
              </ul>
            </li>
            {% else %}
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('views.register') }}">Register</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('views.login') }}">Login</a>
            </li>
            {% endif %}
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('views.test') }}">test</a>
            </li>
        </div>
      </div>
    </nav>

    <br><br>
  {% block content %}
  {% endblock %}


  </body>
</html>